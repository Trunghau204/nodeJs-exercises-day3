<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Products Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      tbody tr:hover {
        background-color: #f8f9fa;
        cursor: pointer;
      }
      .img-thumb {
        width: 50px;
        height: 50px;
        object-fit: cover;
      }
    </style>
    <script defer src="main.js"></script>
  </head>
  <body class="bg-light">
    <div class="container mt-4">
      <h2 class="mb-3">üì¶ Products Dashboard</h2>

      <!-- Controls -->
      <div class="row mb-3">
        <div class="col-md-4">
          <input
            type="text"
            id="searchInput"
            class="form-control"
            placeholder="üîç Search by title"
          />
        </div>
        <div class="col-md-2">
          <select id="pageSize" class="form-select">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="20">20</option>
          </select>
        </div>
        <div class="col-md-6 text-end">
          <button class="btn btn-success me-2" onclick="exportCSV()">
            ‚¨á Export CSV
          </button>
          <button
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#createModal"
          >
            ‚ûï Create
          </button>
        </div>
      </div>

      <!-- Table -->
      <table class="table table-bordered table-hover">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th onclick="sortBy('title')" style="cursor: pointer">Title ‚¨ç</th>
            <th>Category</th>
            <th onclick="sortBy('price')" style="cursor: pointer">Price ‚¨ç</th>
            <th>Image</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>

      <!-- Pagination -->
      <nav>
        <ul class="pagination" id="pagination"></ul>
      </nav>
    </div>

    <!-- Detail/Edit Modal -->
    <div class="modal fade" id="detailModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Product Detail</h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="editId" />
            <div class="mb-2">
              <label>Title</label>
              <input id="editTitle" class="form-control" />
            </div>
            <div class="mb-2">
              <label>Price</label>
              <input id="editPrice" type="number" class="form-control" />
            </div>
            <div class="mb-2">
              <label>Description</label>
              <textarea id="editDesc" class="form-control"></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" onclick="updateProduct()">
              üíæ Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Create Modal -->
    <div class="modal fade" id="createModal" tabindex="-1">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="bi bi-plus-circle"></i> Create New Product
            </h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="newTitle" class="form-label">
                  <i class="bi bi-card-heading"></i> Product Title
                </label>
                <input
                  id="newTitle"
                  class="form-control"
                  placeholder="Enter product title"
                  required
                />
              </div>

              <div class="col-md-6 mb-3">
                <label for="newPrice" class="form-label">
                  <i class="bi bi-currency-dollar"></i> Price
                </label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input
                    id="newPrice"
                    type="number"
                    class="form-control"
                    placeholder="0.00"
                    step="0.01"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="newDesc" class="form-label">
                <i class="bi bi-text-paragraph"></i> Description
              </label>
              <textarea
                id="newDesc"
                class="form-control"
                rows="3"
                placeholder="Enter product description"
              ></textarea>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="newCategory" class="form-label">
                  <i class="bi bi-tag"></i> Category ID
                </label>
                <input
                  id="newCategory"
                  type="number"
                  class="form-control"
                  placeholder="e.g., 1, 2, 3..."
                  required
                />
                <small class="text-muted"
                  >Common: 1-Clothes, 2-Electronics, 3-Furniture</small
                >
              </div>

              <div class="col-md-6 mb-3">
                <label for="newImage" class="form-label">
                  <i class="bi bi-image"></i> Image URL
                </label>
                <input
                  id="newImage"
                  class="form-control"
                  placeholder="https://example.com/image.jpg"
                  required
                />
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">
              <i class="bi bi-x-circle"></i> Cancel
            </button>
            <button class="btn btn-success" onclick="createProduct()">
              <i class="bi bi-check-circle"></i> Create Product
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
  </body>
</html>
